<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Eschercube | Motion Clouds</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../rss.xml">
<link rel="canonical" href="http://neuralensemble.github.io/MotionClouds/posts/eschercube.html">
<link rel="icon" href="favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="Laurent Perrinet">
<link rel="prev" href="instructions-for-psychophysicists.html" title="Instructions for Psychophysicists" type="text/html">
<link rel="next" href="colored-motion-clouds.html" title="Colored Motion Clouds" type="text/html">
<meta property="og:site_name" content="Motion Clouds">
<meta property="og:title" content="Eschercube">
<meta property="og:url" content="http://neuralensemble.github.io/MotionClouds/posts/eschercube.html">
<meta property="og:description" content="Eschercube¶






Motion Clouds are a set of stimuli designed to explore in a systematic way the functional response of a sensory system to a natural-like motion stimulus.
These are optimized for tran">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-10-28T10:56:29+01:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
<!-- Custom search -->
<form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://neuralensemble.github.io/MotionClouds/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->

            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../">

            <span id="blog-title">Motion Clouds</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="eschercube.ipynb" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../index.html" class="nav-link">Home</a>
                </li>
<li class="nav-item">
<a href="../archive.html" class="nav-link">How-to</a>
                </li>
<li class="nav-item">
<a href="https://laurentperrinet.github.io/sciblog/categories/motionclouds.html" class="nav-link">Examples</a>
                </li>
<li class="nav-item">
<a href="../install.html" class="nav-link">Install</a>
                </li>
<li class="nav-item">
<a href="https://laurentperrinet.github.io" class="nav-link">About my research</a>
                </li>
<li class="nav-item">
<a href="https://twitter.com/laurentperrinet" class="nav-link">Twitter</a>
                </li>
<li class="nav-item">
<a href="https://github.com/NeuralEnsemble/MotionClouds" class="nav-link">Github</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Eschercube</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Laurent Perrinet
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2014-10-28T10:56:29+01:00" itemprop="datePublished" title="2014-10-28 10:56">2014-10-28 10:56</time></a>
            </p>
                <p class="commentline">
        
    <a href="eschercube.html#disqus_thread" data-disqus-identifier="cache/posts/eschercube.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="eschercube.ipynb" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Eschercube">Eschercube<a class="anchor-link" href="eschercube.html#Eschercube">¶</a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Motion Clouds are a set of stimuli designed to explore in a systematic way the functional response of a sensory system to a natural-like motion stimulus.</p>
<p>These are optimized for translating, full-field motion and are by construction textures synthesized from randomly placed similar motion patches with characteristics spatial parameters. The object of such an endeavor is to systematically test a system to varying the parameters by testing the response to a series of such textures.</p>
<p>We show here for a fixed set of central parameters (mean speed, direction, orientation and spatial frequency) a cube constituted by a family of such Motion Clouds when varying the bandwidth parameters for speed (left panel), frequency (right panel) and orientation (top panel).</p>
<p>Each elementary cube in the larger cube denoting the parameter space represents a Motion Cloud and is shown as a cube to represent the corresponding movie, with time flowing from lower left to upper right in the right and top facets. Overlaid hue gives a measure of a typical response for a sensory response (here a motion energy model) which gives a complete characterization of the sensory system at hand.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">'''&lt;video alt="MCartwork" controls autoplay="1" loop="1" width="100%"&gt;</span>
<span class="s1">                &lt;source src=</span><span class="si">{url}</span><span class="s1"> type="video/mp4"/&gt;</span>
<span class="s1">             &lt;/video&gt;'''</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">'http://motionclouds.invibe.net/files/MCartwork.mp4'</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[1]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<video alt="MCartwork" controls autoplay="1" loop="1" width="100%"><source src="http://motionclouds.invibe.net/files/MCartwork.mp4" type="video/mp4"></source></video>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="the-making-of-the-parameter-cube-:-1)-making-a-cristal">the making of the parameter cube : 1) making a cristal<a class="anchor-link" href="eschercube.html#the-making-of-the-parameter-cube-:-1)-making-a-cristal">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">infile</span> <span class="o">=</span> \
<span class="sd">"""ATOM 001 N   ASN A  4 0 0 0</span>
<span class="sd">ATOM 002 CA  ASN A  4 0 0 1</span>
<span class="sd">ATOM 003 C   ASN A  4 0 0 2</span>
<span class="sd">ATOM 004 O   ASN A  4 0 0 3</span>
<span class="sd">ATOM 005 CB  ASN A  4 0 0 4</span>
<span class="sd">ATOM 006 CG  ASN A  4 0 1 0</span>
<span class="sd">ATOM 007 OD1 ASN A  4 0 1 1</span>
<span class="sd">ATOM 008 ND2 ASN A  4 0 1 2</span>
<span class="sd">ATOM 009 N   CYS A  5 0 1 3</span>
<span class="sd">ATOM 010 CA  CYS A  5 0 1 4</span>
<span class="sd">ATOM 011 C   CYS A  5 0 2 0</span>
<span class="sd">ATOM 012 O   CYS A  5 0 2 1</span>
<span class="sd">ATOM 013 CB  CYS A  5 0 2 2</span>
<span class="sd">ATOM 014 SG  CYS A  5 0 2 3</span>
<span class="sd">ATOM 015 N   GLU A  6 0 2 4</span>
<span class="sd">ATOM 016 CA  GLU A  6 0 3 0</span>
<span class="sd">ATOM 017 C   GLU A  6 0 3 1</span>
<span class="sd">ATOM 018 O   GLU A  6 0 3 2</span>
<span class="sd">ATOM 019 CB  GLU A  6 0 3 3</span>
<span class="sd">ATOM 020 CG  GLU A  6 0 3 4</span>
<span class="sd">ATOM 021 CD  GLU A  6 0 4 0</span>
<span class="sd">ATOM 022 OE1 GLU A  6 0 4 1</span>
<span class="sd">ATOM 023 OE2 GLU A  6 0 4 2</span>
<span class="sd">ATOM 024 N   ARG A  7 0 4 3</span>
<span class="sd">ATOM 025 CA  ARG A  7 0 4 4</span>
<span class="sd">ATOM 026 C   ARG A  7 1 0 0</span>
<span class="sd">ATOM 027 O   ARG A  7 1 0 1</span>
<span class="sd">ATOM 028 CB  ARG A  7 1 0 2</span>
<span class="sd">ATOM 029 CG  ARG A  7 1 0 3</span>
<span class="sd">ATOM 030 CD  ARG A  7 1 0 4</span>
<span class="sd">ATOM 031 NE  ARG A  7 1 1 0</span>
<span class="sd">ATOM 032 CZ  ARG A  7 1 1 1</span>
<span class="sd">ATOM 033 NH1 ARG A  7 1 1 2</span>
<span class="sd">ATOM 034 NH2 ARG A  7 1 1 3</span>
<span class="sd">ATOM 035 N   VAL A  8 1 1 4</span>
<span class="sd">ATOM 036 CA  VAL A  8 1 2 0</span>
<span class="sd">ATOM 037 C   VAL A  8 1 2 1</span>
<span class="sd">ATOM 038 O   VAL A  8 1 2 2</span>
<span class="sd">ATOM 039 CB  VAL A  8 1 2 3</span>
<span class="sd">ATOM 040 CG1 VAL A  8 1 2 4</span>
<span class="sd">ATOM 041 CG2 VAL A  8 1 3 0</span>
<span class="sd">ATOM 042 N   TRP A  9 1 3 1</span>
<span class="sd">ATOM 043 CA  TRP A  9 1 3 2</span>
<span class="sd">ATOM 044 C   TRP A  9 1 3 3</span>
<span class="sd">ATOM 045 O   TRP A  9 1 3 4</span>
<span class="sd">ATOM 046 CB  TRP A  9 1 4 0</span>
<span class="sd">ATOM 047 CG  TRP A  9 1 4 1</span>
<span class="sd">ATOM 048 CD1 TRP A  9 1 4 2</span>
<span class="sd">ATOM 049 CD2 TRP A  9 1 4 3</span>
<span class="sd">ATOM 050 NE1 TRP A  9 1 4 4</span>
<span class="sd">ATOM 051 CE2 TRP A  9 2 0 0</span>
<span class="sd">ATOM 052 CE3 TRP A  9 2 0 1</span>
<span class="sd">ATOM 053 CZ2 TRP A  9 2 0 2</span>
<span class="sd">ATOM 054 CZ3 TRP A  9 2 0 3</span>
<span class="sd">ATOM 055 CH2 TRP A  9 2 0 4</span>
<span class="sd">ATOM 056 N   LEU A 10 2 1 0</span>
<span class="sd">ATOM 057 CA  LEU A 10 2 1 1</span>
<span class="sd">ATOM 058 C   LEU A 10 2 1 2</span>
<span class="sd">ATOM 059 O   LEU A 10 2 1 3</span>
<span class="sd">ATOM 060 CB  LEU A 10 2 1 4</span>
<span class="sd">ATOM 061 CG  LEU A 10 2 2 0</span>
<span class="sd">ATOM 062 CD1 LEU A 10 2 2 1</span>
<span class="sd">ATOM 063 CD2 LEU A 10 2 2 2</span>
<span class="sd">ATOM 064 N   ASN A 11 2 2 3</span>
<span class="sd">ATOM 065 CA  ASN A 11 2 2 4</span>
<span class="sd">ATOM 066 C   ASN A 11 2 3 0</span>
<span class="sd">ATOM 067 O   ASN A 11 2 3 1</span>
<span class="sd">ATOM 068 CB  ASN A 11 2 3 2</span>
<span class="sd">ATOM 069 CG  ASN A 11 2 3 3</span>
<span class="sd">ATOM 070 OD1 ASN A 11 2 3 4</span>
<span class="sd">ATOM 071 ND2 ASN A 11 2 4 0</span>
<span class="sd">ATOM 072 N   VAL A 12 2 4 1</span>
<span class="sd">ATOM 073 CA  VAL A 12 2 4 2</span>
<span class="sd">ATOM 074 C   VAL A 12 2 4 3</span>
<span class="sd">ATOM 075 O   VAL A 12 2 4 4</span>
<span class="sd">ATOM 076 CB  VAL A 12 3 0 0</span>
<span class="sd">ATOM 077 CG1 VAL A 12 3 0 1</span>
<span class="sd">ATOM 078 CG2 VAL A 12 3 0 2</span>
<span class="sd">ATOM 079 N   THR A 13 3 0 3</span>
<span class="sd">ATOM 080 CA  THR A 13 3 0 4</span>
<span class="sd">ATOM 081 C   THR A 13 3 1 0</span>
<span class="sd">ATOM 082 O   THR A 13 3 1 1</span>
<span class="sd">ATOM 083 CB  THR A 13 3 1 2</span>
<span class="sd">ATOM 084 OG1 THR A 13 3 1 3</span>
<span class="sd">ATOM 085 CG2 THR A 13 3 1 4</span>
<span class="sd">ATOM 086 N   PRO A 14 3 2 0</span>
<span class="sd">ATOM 087 CA  PRO A 14 3 2 1</span>
<span class="sd">ATOM 088 C   PRO A 14 3 2 2</span>
<span class="sd">ATOM 089 O   PRO A 14 3 2 3</span>
<span class="sd">ATOM 090 CB  PRO A 14 3 2 4</span>
<span class="sd">ATOM 091 CG  PRO A 14 3 3 0</span>
<span class="sd">ATOM 092 CD  PRO A 14 3 3 1</span>
<span class="sd">ATOM 093 N   ALA A 15 3 3 2</span>
<span class="sd">ATOM 094 CA  ALA A 15 3 3 3</span>
<span class="sd">ATOM 095 C   ALA A 15 3 3 4</span>
<span class="sd">ATOM 096 O   ALA A 15 3 4 0</span>
<span class="sd">ATOM 097 CB  ALA A 15 3 4 1</span>
<span class="sd">ATOM 098 N   THR A 16 3 4 2</span>
<span class="sd">ATOM 099 CA  THR A 16 3 4 3</span>
<span class="sd">ATOM 100 C   THR A 16 3 4 4</span>
<span class="sd">ATOM 101 O   THR A 16 4 0 0</span>
<span class="sd">ATOM 102 CB  THR A 16 4 0 1</span>
<span class="sd">ATOM 103 OG1 THR A 16 4 0 2</span>
<span class="sd">ATOM 104 CG2 THR A 16 4 0 3</span>
<span class="sd">ATOM 105 N   LEU A 17 4 0 4</span>
<span class="sd">ATOM 106 CA  LEU A 17 4 1 0</span>
<span class="sd">ATOM 107 C   LEU A 17 4 1 1</span>
<span class="sd">ATOM 108 O   LEU A 17 4 1 2</span>
<span class="sd">ATOM 109 CB  LEU A 17 4 1 3</span>
<span class="sd">ATOM 110 CG  LEU A 17 4 1 4</span>
<span class="sd">ATOM 111 CD1 LEU A 17 4 2 0</span>
<span class="sd">ATOM 112 CD2 LEU A 17 4 2 1</span>
<span class="sd">ATOM 113 N   ARG A 18 4 2 2</span>
<span class="sd">ATOM 114 CA  ARG A 18 4 2 3</span>
<span class="sd">ATOM 115 C   ARG A 18 4 2 4</span>
<span class="sd">ATOM 116 O   ARG A 18 4 3 0</span>
<span class="sd">ATOM 117 CB  ARG A 18 4 3 1</span>
<span class="sd">ATOM 118 CG  ARG A 18 4 3 2</span>
<span class="sd">ATOM 119 CD  ARG A 18 4 3 3</span>
<span class="sd">ATOM 120 NE  ARG A 18 4 3 4</span>
<span class="sd">ATOM 121 CZ  ARG A 18 4 4 0</span>
<span class="sd">ATOM 122 NH1 ARG A 18 4 4 1</span>
<span class="sd">ATOM 123 NH2 ARG A 18 4 4 2</span>
<span class="sd">ATOM 124 N   SER A 19 4 4 3</span>
<span class="sd">ATOM 125 CA  SER A 19 4 4 4</span>
<span class="sd">CONECT 001 002 003 004 005</span>
<span class="sd">CONECT 006 007 008 009 010</span>
<span class="sd">CONECT 011 012 013 014 015</span>
<span class="sd">CONECT 016 017 018 019 020</span>
<span class="sd">CONECT 021 022 023 024 025</span>
<span class="sd">CONECT 026 027 028 029 030</span>
<span class="sd">CONECT 031 032 033 034 035</span>
<span class="sd">CONECT 036 037 038 039 040</span>
<span class="sd">CONECT 041 042 043 044 045</span>
<span class="sd">CONECT 046 047 048 049 050</span>
<span class="sd">CONECT 051 052 053 054 055</span>
<span class="sd">CONECT 056 057 058 059 060</span>
<span class="sd">CONECT 061 062 063 064 065</span>
<span class="sd">CONECT 066 067 068 069 070</span>
<span class="sd">CONECT 071 072 073 074 075</span>
<span class="sd">CONECT 076 077 078 079 080</span>
<span class="sd">CONECT 081 082 083 084 085</span>
<span class="sd">CONECT 086 087 088 089 090</span>
<span class="sd">CONECT 091 092 093 094 095</span>
<span class="sd">CONECT 096 097 098 099 100</span>
<span class="sd">CONECT 101 102 103 104 105</span>
<span class="sd">CONECT 106 107 108 109 110</span>
<span class="sd">CONECT 111 112 113 114 115</span>
<span class="sd">CONECT 116 117 118 119 120</span>
<span class="sd">CONECT 121 122 123 124 125</span>
<span class="sd">CONECT 001 006 011 016 021</span>
<span class="sd">CONECT 026 031 036 041 046</span>
<span class="sd">CONECT 051 056 061 066 071</span>
<span class="sd">CONECT 076 081 086 091 096</span>
<span class="sd">CONECT 101 106 111 116 121</span>
<span class="sd">CONECT 002 007 012 017 022</span>
<span class="sd">CONECT 027 032 037 042 047</span>
<span class="sd">CONECT 052 057 062 067 072</span>
<span class="sd">CONECT 077 082 087 092 097</span>
<span class="sd">CONECT 102 107 112 117 122</span>
<span class="sd">CONECT 003 008 013 018 023</span>
<span class="sd">CONECT 028 033 038 043 048</span>
<span class="sd">CONECT 053 058 063 068 073</span>
<span class="sd">CONECT 078 083 088 093 098</span>
<span class="sd">CONECT 103 108 113 118 123</span>
<span class="sd">CONECT 004 009 014 019 024</span>
<span class="sd">CONECT 029 034 039 044 049</span>
<span class="sd">CONECT 054 059 064 069 074</span>
<span class="sd">CONECT 079 084 089 094 099</span>
<span class="sd">CONECT 104 109 114 119 124</span>
<span class="sd">CONECT 005 010 015 020 025</span>
<span class="sd">CONECT 030 035 040 045 050</span>
<span class="sd">CONECT 055 060 065 070 075</span>
<span class="sd">CONECT 080 085 090 095 100</span>
<span class="sd">CONECT 105 110 115 120 125</span>
<span class="sd">CONECT 001 026 051 076 101</span>
<span class="sd">CONECT 002 027 052 077 102</span>
<span class="sd">CONECT 003 028 053 078 103</span>
<span class="sd">CONECT 004 029 054 079 104</span>
<span class="sd">CONECT 005 030 055 080 105</span>
<span class="sd">CONECT 006 031 056 081 106</span>
<span class="sd">CONECT 007 032 057 082 107</span>
<span class="sd">CONECT 008 033 058 083 108</span>
<span class="sd">CONECT 009 034 059 084 109</span>
<span class="sd">CONECT 010 035 060 085 110</span>
<span class="sd">CONECT 011 036 061 086 111</span>
<span class="sd">CONECT 012 037 062 087 112</span>
<span class="sd">CONECT 013 038 063 088 113</span>
<span class="sd">CONECT 014 039 064 089 114</span>
<span class="sd">CONECT 015 040 065 090 115</span>
<span class="sd">CONECT 016 041 066 091 116</span>
<span class="sd">CONECT 017 042 067 092 117</span>
<span class="sd">CONECT 018 043 068 093 118</span>
<span class="sd">CONECT 019 044 069 094 119</span>
<span class="sd">CONECT 020 045 070 095 120</span>
<span class="sd">CONECT 021 046 071 096 121</span>
<span class="sd">CONECT 022 047 072 097 122</span>
<span class="sd">CONECT 023 048 073 098 123</span>
<span class="sd">CONECT 024 049 074 099 124</span>
<span class="sd">CONECT 025 050 075 100 125</span>
<span class="sd">"""</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="the-making-of-the-parameter-cube-:-2)--filling-the-cristal">the making of the parameter cube : 2)  filling the cristal<a class="anchor-link" href="eschercube.html#the-making-of-the-parameter-cube-:-2)--filling-the-cristal">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">'../galleries/Artwork/MCartwork.mp4'</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">from</span> <span class="nn">tvtk.api</span> <span class="kn">import</span> <span class="n">tvtk</span>
    <span class="kn">from</span> <span class="nn">mayavi.sources.vtk_data_source</span> <span class="kn">import</span> <span class="n">VTKDataSource</span>
    <span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
    <span class="kn">import</span> <span class="nn">MotionClouds</span> <span class="k">as</span> <span class="nn">mc</span>
    <span class="kn">import</span> <span class="nn">itertools</span>
    <span class="kn">import</span> <span class="nn">os</span>

    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">bwd</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Create motion cloud source</span>
<span class="sd">        """</span>
        <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">ft</span> <span class="o">=</span> <span class="n">dim</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">envelope_gabor</span><span class="p">(</span><span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">B_sf</span><span class="o">=</span><span class="n">bwd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">B_V</span><span class="o">=</span><span class="n">bwd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">B_theta</span><span class="o">=</span><span class="n">bwd</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">rectif</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">random_cloud</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">image_data</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">sp</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">bwd</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Create Image Data for the surface from a data source.</span>
<span class="sd">        """</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">bwd</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">tvtk</span><span class="o">.</span><span class="n">ImageData</span><span class="p">(</span><span class="n">spacing</span><span class="o">=</span><span class="n">sp</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">orig</span><span class="p">)</span>
        <span class="n">i</span><span class="o">.</span><span class="n">point_data</span><span class="o">.</span><span class="n">scalars</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="n">i</span><span class="o">.</span><span class="n">point_data</span><span class="o">.</span><span class="n">scalars</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'scalars'</span>
        <span class="n">i</span><span class="o">.</span><span class="n">dimensions</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">dataset</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Open up a mayavi scene and display the cubeset in it.</span>
<span class="sd">        """</span>
        <span class="n">engine</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">get_engine</span><span class="p">()</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">VTKDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dataset</span><span class="p">)</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
        <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">sp</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">orig</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">B</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">01</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">)):</span>
        <span class="n">view</span><span class="p">(</span><span class="n">image_data</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="n">dim</span><span class="p">,</span> <span class="n">sp</span><span class="o">=</span><span class="n">sp</span><span class="p">,</span> <span class="n">orig</span><span class="o">=</span><span class="n">orig</span><span class="p">,</span> <span class="n">bwd</span><span class="o">=</span><span class="n">B</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">get_nodes_and_edges</span><span class="p">():</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">atoms</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="c1"># Build the graph from the PDB information</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">infile</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'ATOM'</span><span class="p">:</span>
                <span class="n">nodes</span><span class="p">[</span><span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
                <span class="n">atoms</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'CONECT'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:]):</span>
                    <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">))</span>
        <span class="n">atoms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">atoms</span><span class="p">)</span>
        <span class="n">atoms</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">atoms</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">atoms</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">atoms</span><span class="p">))))</span>
        <span class="c1"># Turn the graph into 3D positions, and a connection list.</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">x</span>       <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">y</span>       <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">z</span>       <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">scalars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
            <span class="n">labels</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
            <span class="n">this_scalar</span><span class="p">,</span> <span class="n">this_x</span><span class="p">,</span> <span class="n">this_y</span><span class="p">,</span> <span class="n">this_z</span><span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
            <span class="n">scalars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">atoms</span><span class="p">[</span><span class="n">this_scalar</span><span class="p">])</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">this_x</span><span class="p">))</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">this_y</span><span class="p">))</span>
            <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">this_z</span><span class="p">))</span>
        <span class="n">connections</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
            <span class="n">connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">labels</span><span class="p">[</span><span class="n">start</span><span class="p">],</span> <span class="n">labels</span><span class="p">[</span><span class="n">stop</span><span class="p">]))</span>
        <span class="n">x</span>       <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span>       <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">z</span>       <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">scalars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">scalars</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">connections</span><span class="p">,</span> <span class="n">scalars</span>

    <span class="n">size</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="mi">4</span> <span class="c1">##</span>
    <span class="n">space</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">size</span> <span class="c1"># space between 2 cubes</span>
    <span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">space</span>
    <span class="n">Bf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
    <span class="n">Bv</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]</span>
    <span class="n">sigma_div</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
    <span class="n">Bo</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">sigma_div</span><span class="p">)</span>
    <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">ft</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">get_grids</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
    <span class="n">downscale</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">mlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">6</span><span class="p">,</span> <span class="o">.</span><span class="mi">6</span><span class="p">,</span> <span class="o">.</span><span class="mi">6</span><span class="p">),</span> <span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1600</span><span class="o">/</span><span class="n">downscale</span><span class="p">,</span><span class="mi">1200</span><span class="o">/</span><span class="n">downscale</span><span class="p">))</span>
    <span class="n">mlab</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
    <span class="n">do_grid</span><span class="p">,</span> <span class="n">do_splatter</span><span class="p">,</span> <span class="n">do_MCs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span>

    <span class="sd">""" Generate the cubical graph structure to connect each individual cube """</span>
    <span class="k">if</span> <span class="n">do_grid</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">connections</span><span class="p">,</span> <span class="n">scalars</span> <span class="o">=</span> <span class="n">get_nodes_and_edges</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">space</span> <span class="o">+</span> <span class="n">size</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="n">space</span> <span class="o">+</span> <span class="n">size</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="n">space</span> <span class="o">+</span> <span class="n">size</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">scalars</span> <span class="o">=</span> <span class="mf">0.8</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">points3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">scalars</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">'Blues'</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">pts</span><span class="o">.</span><span class="n">mlab_source</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">connections</span><span class="p">)</span>
        <span class="c1"># Use a tube filter to plot tubes on the link, varying the radius with the scalar value</span>
        <span class="n">tube</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">tube</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">tube_sides</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">tube_radius</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
        <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">tube</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)</span> <span class="p">)</span>

    <span class="sd">""" Gaussian Splatter """</span>
    <span class="k">if</span> <span class="n">do_splatter</span><span class="p">:</span>
        <span class="c1"># Visualize the local atomic density</span>
        <span class="n">x_</span><span class="p">,</span> <span class="n">y_</span><span class="p">,</span> <span class="n">z_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="n">N</span><span class="o">*</span><span class="n">space</span><span class="p">),</span> <span class="mi">0</span><span class="p">:(</span><span class="n">N</span><span class="o">*</span><span class="n">space</span><span class="p">),</span> <span class="mi">0</span><span class="p">:(</span><span class="n">N</span><span class="o">*</span><span class="n">space</span><span class="p">)]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">((</span><span class="n">x_</span><span class="o">-</span><span class="mi">4</span><span class="o">*</span><span class="n">space</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span><span class="p">(</span><span class="n">y_</span><span class="o">-</span> <span class="mi">1</span><span class="o">*</span><span class="n">space</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span><span class="p">((</span><span class="n">z_</span><span class="o">-</span><span class="mf">3.4</span><span class="o">*</span><span class="n">space</span><span class="p">)</span><span class="o">/</span><span class="mf">2.</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="mf">1.3</span><span class="o">*</span><span class="n">space</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">mlab</span><span class="o">.</span><span class="n">contour3d</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="sd">""" Generate the Motion Clouds cubes """</span>
    <span class="k">if</span> <span class="n">do_MCs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">)):</span>
            <span class="n">main</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="p">(</span><span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">ft</span><span class="p">),</span> <span class="n">orig</span><span class="o">=</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="n">k</span><span class="p">]),</span> <span class="n">B</span><span class="o">=</span><span class="p">(</span><span class="n">Bf</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Bv</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">Bo</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span>
    <span class="n">elevation</span> <span class="o">=</span> <span class="mf">90.</span> <span class="o">-</span> <span class="mf">18.</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">azimuth</span><span class="o">=</span><span class="mf">290.</span><span class="p">,</span> <span class="n">elevation</span><span class="o">=</span><span class="n">elevation</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">focalpoint</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">view</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">mlab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">'MCartwork.png'</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">N_frame</span> <span class="o">=</span> <span class="mi">64</span> <span class="c1">##</span>
        <span class="k">for</span> <span class="n">i_az</span><span class="p">,</span> <span class="n">azimuth</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="n">N_frame</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)):</span>
            <span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">*</span><span class="n">view</span><span class="p">)</span>
            <span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">azimuth</span><span class="o">=</span><span class="n">azimuth</span><span class="p">)</span>
            <span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="o">*</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span> <span class="o">+</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">azimuth</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">360.</span><span class="p">)))</span>
            <span class="n">mlab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">'_MCartwork</span><span class="si">%03d</span><span class="s1">.png'</span> <span class="o">%</span> <span class="n">i_az</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1600</span><span class="o">/</span><span class="n">downscale</span><span class="p">,</span> <span class="mi">1200</span><span class="o">/</span><span class="n">downscale</span><span class="p">))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'ffmpeg -y -i _MCartwork</span><span class="si">%03d</span><span class="s1">.png  MCartwork.mpg'</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'ffmpeg -y -i _MCartwork</span><span class="si">%03d</span><span class="s1">.png  MCartwork.mp4'</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'convert -delay 8 -loop 0 -colors 256  -scale 25</span><span class="si">% -la</span><span class="s1">yers Optimize  _MCartwork*.png  MCartwork.gif'</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'rm _MCartwork*'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="the-making-of-the-parameter-cube-:-3)-post-production">the making of the parameter cube : 3) post-production<a class="anchor-link" href="eschercube.html#the-making-of-the-parameter-cube-:-3)-post-production">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Image</span>
<span class="c1">#display(Image(filename='../galleries/Artwork/MCartwork.png', embed=True))</span>

<span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">'http://motionclouds.invibe.net/galleries/Artwork/MCartwork.png'</span><span class="p">,</span> <span class="n">embed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<img src="http://motionclouds.invibe.net/galleries/Artwork/MCartwork.png">
</div>

</div>

</div>
</div>

</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="instructions-for-psychophysicists.html" rel="prev" title="Instructions for Psychophysicists">Previous post</a>
            </li>
            <li class="next">
                <a href="colored-motion-clouds.html" rel="next" title="Colored Motion Clouds">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="invibe",
            disqus_url="http://neuralensemble.github.io/MotionClouds/posts/eschercube.html",
        disqus_title="Eschercube",
        disqus_identifier="cache/posts/eschercube.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    },
    displayAlign: 'center', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article><script>var disqus_shortname="invibe";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2021 <a href="mailto:laurent.perrinet@univ-amu.fr">Laurent Perrinet</a> -
Powered by <a href="http://getnikola.com">Nikola</a> with <a href="https://themes.getnikola.com/v7/maupassant/">Maupassant</a> theme <br><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a>
            
            
        </footer>
</div>
</div>


        <script src="../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
